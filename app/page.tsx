'use client'; import { useState } from 'react'; import SearchBar from './components/SearchBar'; import ResultsList from './components/ResultsList'; import LoadingSpinner from './components/LoadingSpinner'; interface SearchResult { url: string; timestamp: string; statusCode: number; } export default function Home() { const [results, setResults] = useState<SearchResult[]>([]); const [loading, setLoading] = useState(false); const [searched, setSearched] = useState(false); const [username, setUsername] = useState(''); const [error, setError] = useState(''); const handleSearch = async (user: string, keywords: string) => { if (!user.trim()) { setError('Por favor ingresa un usuario'); return; } setLoading(true); setError(''); setUsername(user); try { const response = await fetch('/api/search', { method: 'POST', headers: { 'Content-Type': 'application/json', }, body: JSON.stringify({ username: user, keywords: keywords, }), }); if (!response.ok) { throw new Error('Error en la búsqueda'); } const data = await response.json(); setResults(data.results || []); setSearched(true); } catch (err) { setError('Error al conectar con Wayback Machine. Intenta de nuevo.'); setResults([]); } finally { setLoading(false); } }; return ( <div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 py-12 px-4"> <div className="max-w-4xl mx-auto"> <div className="text-center mb-12"> <h1 className="text-5xl font-bold text-white mb-4 drop-shadow-lg"> WBMOSINT 2.0 </h1> <p className="text-purple-200 text-lg"> Búsqueda OSINT con Wayback Machine API </p> <p className="text-purple-300 text-sm mt-2"> Encuentra todas las páginas indexadas de cualquier usuario </p> </div> <SearchBar onSearch={handleSearch} loading={loading} /> {error && ( <div className="mt-6 p-4 bg-red-500/20 border border-red-500 rounded-lg"> <p className="text-red-200">{error}</p> </div> )} {loading && <LoadingSpinner />} {searched && !loading && ( <div className="mt-8"> <h2 className="text-2xl font-bold text-white mb-4"> Resultados para: <span className="text-purple-400">@{username}</span> </h2> <ResultsList results={results} /> </div> )} {searched && !loading && results.length === 0 && ( <div className="mt-8 text-center"> <p className="text-purple-300 text-lg"> No se encontraron páginas indexadas para este usuario. </p> </div> )} <div className="mt-16 text-center text-purple-400 text-sm"> <p>WBMOSINT 2.0 © 2026 | Powered by Wayback Machine</p> </div> </div> </div> ); }